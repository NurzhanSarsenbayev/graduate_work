---

# üìÑ PLAN.md ‚Äî –§–∏–Ω–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –¥–∏–ø–ª–æ–º–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞

**–ü—Ä–æ–µ–∫—Ç:** ETL-–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∏ –ø–æ–∏—Å–∫–æ–≤—ã—Ö –≤–∏—Ç—Ä–∏–Ω –æ–Ω–ª–∞–π–Ω-–∫–∏–Ω–æ—Ç–µ–∞—Ç—Ä–∞  
**–§–æ—Ä–º–∞—Ç:** production-ready MVP

---

## 1. –°—Ç—Ä–∞—Ç–µ–≥–∏—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ–¥—Ö–æ–¥ **Agile —Å –Ω–µ–¥–µ–ª—å–Ω—ã–º–∏ –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–º–∏**, –≥–¥–µ –∫–∞–∂–¥–∞—è –Ω–µ–¥–µ–ª—è –∑–∞–≤–µ—Ä—à–∞–ª–∞—Å—å
—Ä–∞–±–æ—á–∏–º –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–º —Å—Ä–µ–∑–æ–º —Å–∏—Å—Ç–µ–º—ã.

–ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã:

- —Ä–∞–Ω–Ω—è—è —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã;
- —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —á–µ—Ä–µ–∑ —Ä–µ–∞–ª—å–Ω—ã–µ use-cases;
- –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤–º–µ—Å—Ç–æ –∂—ë—Å—Ç–∫–æ–≥–æ –∫–æ–¥–∞;
- documentation-first –ø–æ–¥—Ö–æ–¥;
- –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –ø—Ä–æ–µ–∫—Ç–∞ –∫ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–∞ –ª—é–±–æ–º —ç—Ç–∞–ø–µ.

---

## 2. –≠–ø–∏–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞

### **E1. Meta-store (–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ ETL)**

–•—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø–∞–π–ø–ª–∞–π–Ω–æ–≤, —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ –∏—Å—Ç–æ—Ä–∏–∏ –∑–∞–ø—É—Å–∫–æ–≤.

- `etl_pipelines`
- `etl_state`
- `etl_runs`

---

### **E2. ETL Core Engine (Runner)**

–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –¥–≤–∏–∂–æ–∫ ETL-–ø–∞–π–ø–ª–∞–π–Ω–æ–≤:

- –±–∞—Ç—á-–æ–±—Ä–∞–±–æ—Ç–∫–∞;
- full / incremental —Ä–µ–∂–∏–º—ã;
- –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å;
- —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º –ø–∞–π–ø–ª–∞–π–Ω–∞.

---

### **E3. –£–ø—Ä–∞–≤–ª—è—é—â–∏–π API (FastAPI)**

REST-API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞–π–ø–ª–∞–π–Ω–∞–º–∏:

- CRUD –ø–∞–π–ø–ª–∞–π–Ω–æ–≤;
- –∑–∞–ø—É—Å–∫ / –ø–∞—É–∑–∞;
- —Å—Ç–∞—Ç—É—Å—ã –∏ –∏—Å—Ç–æ—Ä–∏—è –∑–∞–ø—É—Å–∫–æ–≤;
- –±–∏–∑–Ω–µ—Å-–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π.

---

### **E4. –ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å –∏ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å**

- retry / backoff;
- pause / resume;
- –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ —Å–±–æ–µ–≤;
- –∑–∞—â–∏—Ç–∞ –æ—Ç –≥–æ–Ω–æ–∫ –∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –∑–∞–ø—É—Å–∫–æ–≤.

---

### **E5. –ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏ –ø–æ–∏—Å–∫–æ–≤—ã–µ –≤–∏—Ç—Ä–∏–Ω—ã (Postgres + Elasticsearch)**

- –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –≤–∏—Ç—Ä–∏–Ω—ã –≤ Postgres (`analytics`);
- –ø–æ–∏—Å–∫–æ–≤—ã–µ –∏ feature-–≤–∏—Ç—Ä–∏–Ω—ã –≤ Elasticsearch;
- –µ–¥–∏–Ω–∞—è ETL-–ª–æ–≥–∏–∫–∞ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö target‚Äô–æ–≤.

---

### **E6. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –∑–∞—â–∏—Ç–µ**

- ARCHITECTURE.md
- PLAN.md
- README.md
- –¥–µ–º–æ-—Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è.

---

## 3. –ü–ª–∞–Ω –ø–æ –Ω–µ–¥–µ–ª—è–º (—Ñ–∞–∫—Ç + —Ä–µ–∑—É–ª—å—Ç–∞—Ç)

---

## üìÖ –ù–µ–¥–µ–ª—è 1 ‚Äî –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –¥–∏–∑–∞–π–Ω

### üéØ –¶–µ–ª–∏

- –°–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É ETL-–ø–ª–∞—Ç—Ñ–æ—Ä–º—ã.
- –ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å —Ñ–æ—Ä–º–∞—Ç –ø–∞–π–ø–ª–∞–π–Ω–æ–≤ –∏ state-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç–∞.
- –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –±–∞–∑–æ–≤—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é.

### –í—ã–ø–æ–ª–Ω–µ–Ω–æ

- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Runner (PipelineManager, Dispatcher, Executor).
- –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ meta-store.
- –ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã API.
- –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ ARCHITECTURE.md –∏ PLAN.md.

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**  
–ü—Ä–∏–Ω—è—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.

---

## üìÖ –ù–µ–¥–µ–ª—è 2 ‚Äî –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ + Meta-store + API + Runner

### üéØ –¶–µ–ª–∏

- –ü–æ–¥–Ω—è—Ç—å —Ä–∞–±–æ—á–∏–π —Å—Ç–µ–Ω–¥.
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å meta-store.
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å API –∏ –∫–∞—Ä–∫–∞—Å Runner.
- –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–µ—Ä–≤—ã–π ETL.

### –í—ã–ø–æ–ª–Ω–µ–Ω–æ

- Docker Compose (Postgres, API, Runner).
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è meta-store.
- CRUD API –ø–∞–π–ø–ª–∞–π–Ω–æ–≤.
- –ë–∞–∑–æ–≤—ã–π ETL Runner.
- –ü–µ—Ä–≤—ã–π SQL-–ø–∞–π–ø–ª–∞–π–Ω.

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**  
–ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–∏–π —Å—Ç–µ–Ω–¥, –ø–µ—Ä–≤—ã–π ETL –≤ –ø—Ä–æ–¥-–∫–æ–Ω—Ç—É—Ä–µ.

---

## üìÖ –ù–µ–¥–µ–ª—è 3 ‚Äî –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π ETL + –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å

### üéØ –¶–µ–ª–∏

- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å production-ready ETL.
- –î–æ–±–∞–≤–∏—Ç—å –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å.
- –ü–æ—Å—Ç—Ä–æ–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –≤–∏—Ç—Ä–∏–Ω—ã.

### –í—ã–ø–æ–ª–Ω–µ–Ω–æ

- Full –∏ Incremental ETL.
- Cursor-based –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–æ—Å—Ç—å (timestamp + id).
- Retry / backoff.
- Pause / resume –ø–æ—Å–ª–µ –±–∞—Ç—á–∞.
- Recovery –ø–æ—Å–ª–µ –ø–∞–¥–µ–Ω–∏–π.
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞–º–∏ –ø–∞–π–ø–ª–∞–π–Ω–æ–≤.
- –†–µ–∞–ª—å–Ω—ã–µ –≤–∏—Ç—Ä–∏–Ω—ã:
  - `film_work ‚Üí analytics.film_dim`
  - `ratings ‚Üí analytics.film_rating_agg`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**  
–ù–∞–¥—ë–∂–Ω—ã–π ETL Runner —É—Ä–æ–≤–Ω—è production-MVP.

---

## üìÖ –ù–µ–¥–µ–ª—è 4 ‚Äî Elasticsearch, –ø–æ–ª–∏—Ä–æ–≤–∫–∞ –∏ –∑–∞—â–∏—Ç–∞

### üéØ –¶–µ–ª–∏

- –†–∞—Å—à–∏—Ä–∏—Ç—å –ø–ª–∞—Ç—Ñ–æ—Ä–º—É –¥–æ multi-sink.
- –ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é.
- –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –∑–∞—â–∏—Ç—É.

### –í—ã–ø–æ–ª–Ω–µ–Ω–æ

- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Elasticsearch –∫–∞–∫ target:
  - `es:film_dim`
  - `es:film_rating_agg`
- –ê–≤—Ç–æ—Å–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤ –∏ mapping.
- Unified Writer abstraction (Postgres + ES).
- –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–æ–ø—É—Å—Ç–∏–º—ã—Ö target‚Äô–æ–≤.
- –§–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã.
- –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ README –∏ –¥–µ–º–æ-—Å—Ü–µ–Ω–∞—Ä–∏–µ–≤.

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**  
–ì–æ—Ç–æ–≤—ã–π –¥–∏–ø–ª–æ–º–Ω—ã–π –ø—Ä–æ–µ–∫—Ç.

---

## 4. –†–∏—Å–∫–∏ –∏ –∫–∞–∫ –æ–Ω–∏ –±—ã–ª–∏ —Ä–µ—à–µ–Ω—ã

| –†–∏—Å–∫ | –†–µ—à–µ–Ω–∏–µ |
|-----|--------|
| –°–ª–æ–∂–Ω–æ—Å—Ç—å ETL Engine | MVP ‚Üí –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ –Ω–∞—Ä–∞—â–∏–≤–∞–Ω–∏–µ |
| –ü–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö | –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å + state |
| –ü–∞–¥–µ–Ω–∏—è Runner | Recovery + retry |
| –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –æ—à–∏–±–∫–∏ | Documentation-first |
| –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Ü–µ–Ω–Ω–æ—Å—Ç—å | Elasticsearch –∫–∞–∫ search/feature store |

---

## 5. –ò—Ç–æ–≥–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–∏–ø–ª–æ–º–∞

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ **—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è ETL-–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ —É—Ä–æ–≤–Ω—è production-MVP**, –≤–∫–ª—é—á–∞—é—â–∞—è:

- –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º—ã–µ ETL-–ø–∞–π–ø–ª–∞–π–Ω—ã;
- REST-—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ API;
- –Ω–∞–¥—ë–∂–Ω—ã–π ETL Runner;
- full –∏ incremental –∑–∞–≥—Ä—É–∑–∫–∏;
- Postgres –∏ Elasticsearch –∫–∞–∫ target‚Äô—ã;
- –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Airflow;
- –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è.

–ü—Ä–æ–µ–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ –º—ã—à–ª–µ–Ω–∏–µ, –ø—Ä–∞–∫—Ç–∏–∫–∏ –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏ –∏ –ø—Ä–æ–¥-–ø–æ–¥—Ö–æ–¥ –∫ ETL-—Å–∏—Å—Ç–µ–º–∞–º.

---
