
# üî• DEMO_SCRIPT.md

*(–≤–µ—Ä—Å–∏—è 2 ‚Äî –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º –¥–µ–º–æ –≤ —Ç–µ–∫—É—â–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞)*

–î–æ–∫—É–º–µ–Ω—Ç —Ä–∞–∑–¥–µ–ª—ë–Ω –Ω–∞ –±–ª–æ–∫–∏:

1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è –ø–µ—Ä–µ–¥ –¥–µ–º–æ
2. –ß—Ç–æ –æ—Ç–∫—Ä—ã—Ç—å –¥–æ —Å–æ–∑–≤–æ–Ω–∞
3. –û—Ç–∫—Ä—ã–≤–∞—é—â–∞—è —Ä–µ—á—å
4. –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Å—Ç–µ–Ω–¥–∞ (Docker + Postgres)
5. –ü–æ–∫–∞–∑ –¥–∞–Ω–Ω—ã—Ö –∏–∑ `content` –∏ `ugc`
6. –ü–æ–∫–∞–∑ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö –≤–∏—Ç—Ä–∏–Ω –≤ `analytics`
7. –ü–æ–∫–∞–∑ –∫–æ–Ω—Ñ–∏–≥–æ–≤ ETL –≤ `etl`
8. –ü–µ—Ä–µ—Ö–æ–¥ –∫ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ (ARCHITECTURE.md)
9. –ü–ª–∞–Ω –Ω–∞ —Å–ª–µ–¥—É—é—â—É—é –Ω–µ–¥–µ–ª—é
10. –ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã –∏ –æ—Ç–≤–µ—Ç—ã
11. –§–∏–Ω–∞–ª—å–Ω–∞—è —Ñ—Ä–∞–∑–∞

---

## 1Ô∏è‚É£ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è –ø–µ—Ä–µ–¥ –¥–µ–º–æ

### –í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ (–≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ `graduate_work/`):


# –ø–æ–¥–Ω—è—Ç—å Postgres –¥–ª—è –¥–∏–ø–ª–æ–º–∞
docker compose -f infra/docker-compose.yml up -d
````

–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: –≤ –≤—ã–≤–æ–¥–µ **–Ω–µ—Ç –æ—à–∏–±–æ–∫** –ø—Ä–æ –ø–æ—Ä—Ç, –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—â–µ–Ω.

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:

```bash
docker ps
```

–û–∂–∏–¥–∞–µ—à—å —É–≤–∏–¥–µ—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Ç–∏–ø–∞:

```text
CONTAINER ID   IMAGE           COMMAND                  STATUS          PORTS
xxxxxxxxxxxx   postgres:15     "docker-entrypoint.s‚Ä¶"   Up ... minutes  0.0.0.0:5432->5432/tcp   diploma_postgres
```

> üí° –ï—Å–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –Ω–µ—Ç ‚Äî **–Ω–∞ –¥–µ–º–æ –Ω–µ —á–∏–Ω–∏–º**, –∞ –≥–æ–≤–æ—Ä–∏–º: ‚Äú–ª–æ–∫–∞–ª—å–Ω–æ —É–∂–µ –ø–æ–¥–Ω–∏–º–∞–µ—Ç—Å—è, —Å–µ–π—á–∞—Å –≥–ª–∞–≤–Ω–æ–µ ‚Äî –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞‚Äù. –ù–æ –ª—É—á—à–µ –≤—Å—ë-—Ç–∞–∫–∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞—Ä–∞–Ω–µ–µ.

---

## 2Ô∏è‚É£ –ß—Ç–æ –æ—Ç–∫—Ä—ã—Ç—å –¥–æ —Å–æ–∑–≤–æ–Ω–∞

–ü–µ—Ä–µ–¥ –¥–µ–º–æ –æ—Ç–∫—Ä—ã–≤–∞–µ—à—å:

### –í PyCharm / VS Code

–û—Ç–∫—Ä—ã—Ç—å —Ñ–∞–π–ª—ã:

* `docs/ARCHITECTURE.md`
* `infra/docker-compose.yml`
* `README.md` (–µ—Å–ª–∏ –µ—Å—Ç—å —á–µ—Ä–Ω–æ–≤–∏–∫)

### –í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ

* –≤–∫–ª–∞–¥–∫–∞ ‚Ññ1: –æ–±—ã—á–Ω—ã–π —à–µ–ª–ª —Å `docker ps`
* –≤–∫–ª–∞–¥–∫–∞ ‚Ññ2: –≥–æ—Ç–æ–≤–∞—è –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –≤—Ö–æ–¥–∞ –≤ Postgres

```bash
docker exec -it diploma_postgres psql -U cinema -d cinema
```

–ù–æ —Å–∞–º `psql` –ª—É—á—à–µ –æ—Ç–∫—Ä—ã—Ç—å —É–∂–µ **–≤–æ –≤—Ä–µ–º—è –¥–µ–º–æ**, —á—Ç–æ–±—ã –±—ã–ª–æ –≤–∏–¥–Ω–æ, —á—Ç–æ –≤—Å—ë –∂–∏–≤–æ–µ.

---

## 3Ô∏è‚É£ –û—Ç–∫—Ä—ã–≤–∞—é—â–∞—è —Ä–µ—á—å (30‚Äì40 —Å–µ–∫—É–Ω–¥)

–ì–æ–≤–æ—Ä–∏—à—å –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫ (–º–æ–∂–Ω–æ —á–∏—Ç–∞—Ç—å):

> ¬´–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ!
>
> –Ø –¥–µ–ª–∞—é –¥–∏–ø–ª–æ–º –ø–æ —Ç–µ–º–µ **¬´ETL –Ω–∞ —Å—Ç–µ—Ä–æ–∏–¥–∞—Ö¬ª**.
>
> –û—Å–Ω–æ–≤–Ω–∞—è –∑–∞–¥–∞—á–∞ ‚Äî —Å–¥–µ–ª–∞—Ç—å ETL-–ø–ª–∞—Ç—Ñ–æ—Ä–º—É, –∫–æ—Ç–æ—Ä–∞—è –Ω–µ –∂—ë—Å—Ç–∫–æ –∑–∞—à–∏—Ç–∞ –≤ –∫–æ–¥, –∞ —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:
> –º–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å SQL, —Ç–∞–±–ª–∏—Ü—É-–∏—Å—Ç–æ—á–Ω–∏–∫, —Ç–∞–±–ª–∏—Ü—É-–ø—Ä–∏—ë–º–Ω–∏–∫, —Ä–∞–∑–º–µ—Ä –±–∞—Ç—á–∞ ‚Äî **–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è Python-–∫–æ–¥–∞**.
>
> –ù–∞ –ø–µ—Ä–≤–æ–π –Ω–µ–¥–µ–ª–µ —è –ø–æ–¥–≥–æ—Ç–æ–≤–∏–ª –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Å—Ç–µ–Ω–¥:
> Postgres —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Å—Ö–µ–º–∞–º–∏, —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ, –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –≤–∏—Ç—Ä–∏–Ω—ã –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –¥–≤—É—Ö ETL-–ø–∞–π–ø–ª–∞–π–Ω–æ–≤.
>
> –°–µ–π—á–∞—Å –∫—Ä–∞—Ç–∫–æ –ø–æ–∫–∞–∂—É —Å—Ç–µ–Ω–¥ –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É, –∫–æ—Ç–æ—Ä—É—é –±—É–¥—É —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å –¥–∞–ª—å—à–µ.¬ª

–ü–µ—Ä–µ—Ö–æ–¥:

> ¬´–ù–∞—á–Ω—É —Å —Å—Ç–µ–Ω–¥–∞ –∏ —Å—Ö–µ–º –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö¬ª.

---

## 4Ô∏è‚É£ –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Å—Ç–µ–Ω–¥–∞ (Docker + Postgres)

### –í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ (shell)

–ì–æ–≤–æ—Ä–∏—à—å:

> ¬´–°—Ç–µ–Ω–¥ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ Docker Compose. –°–µ–π—á–∞—Å —É –º–µ–Ω—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å Postgres –¥–ª—è –¥–∏–ø–ª–æ–º–∞¬ª.

–ö–æ–º–∞–Ω–¥–∞:

```bash
docker ps
```

–ü–æ–∫–∞–∑—ã–≤–∞–µ—à—å —Å—Ç—Ä–æ–∫—É —Å `diploma_postgres`.

---

### –ü–µ—Ä–µ—Ö–æ–¥ –≤ psql

–ö–æ–º–∞–Ω–¥–∞:

```bash
docker exec -i diploma_postgres psql -U cinema -d cinema < sql/init_demo_data.sql
docker exec -it diploma_postgres psql -U cinema -d cinema
```

–û–∂–∏–¥–∞–µ–º—ã–π –ø—Ä–æ–º–ø—Ç:

```text
psql (15.x)
Type "help" for help.

cinema=#
```

---

## 5Ô∏è‚É£ –ü–æ–∫–∞–∑ –¥–∞–Ω–Ω—ã—Ö –∏–∑ `content` –∏ `ugc`

### 5.1. –§–∏–ª—å–º—ã –≤ `content`

–ì–æ–≤–æ—Ä–∏—à—å:

> ¬´–í —Å—Ö–µ–º–µ `content` –ª–µ–∂–∞—Ç –¥–∞–Ω–Ω—ã–µ –æ–Ω–ª–∞–π–Ω-–∫–∏–Ω–æ—Ç–µ–∞—Ç—Ä–∞ ‚Äî —Ñ–∏–ª—å–º—ã –∏ –±–∞–∑–æ–≤—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã.¬ª

–í psql:

```sql
SET search_path TO content;

SELECT id, title, rating
FROM film_work
ORDER BY title
LIMIT 5;
```

–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥: –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç—Ä–æ–∫ —Å–æ Star Wars / Star Trek ‚Äî —ç—Ç–æ–≥–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å, —á—Ç–æ **–∏—Å—Ç–æ—á–Ω–∏–∫ –µ—Å—Ç—å**.

---

### 5.2. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Ä–µ–π—Ç–∏–Ω–≥–∏ –≤ `ugc`

–ì–æ–≤–æ—Ä–∏—à—å:

> ¬´–í –æ—Ç–¥–µ–ª—å–Ω–æ–π —Å—Ö–µ–º–µ `ugc` —Ö—Ä–∞–Ω—è—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –æ—Ü–µ–Ω–∫–∏ ‚Äî —ç—Ç–æ –Ω–∞—à –≤—Ç–æ—Ä–æ–π –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏.¬ª

–í psql:

```sql
SET search_path TO ugc;

SELECT film_id, rating
FROM ratings
ORDER BY film_id
LIMIT 5;
```

–í–∞–∂–Ω–æ: –ø–æ–∫–∞–∑–∞—Ç—å, —á—Ç–æ `film_id` —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å id –∏–∑ `content.film_work`.

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å –∫—Ä–∞—Å–∏–≤–æ, –º–æ–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å `JOIN`:

```sql
SET search_path TO public;

SELECT
    fw.title,
    r.rating
FROM ugc.ratings r
JOIN content.film_work fw ON fw.id = r.film_id
ORDER BY fw.title
LIMIT 5;
```

---

## 6Ô∏è‚É£ –ü–æ–∫–∞–∑ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö –≤–∏—Ç—Ä–∏–Ω –≤ `analytics`

–ì–æ–≤–æ—Ä–∏—à—å:

> ¬´–í —Å—Ö–µ–º–µ `analytics` —è —Å–¥–µ–ª–∞–ª –¥–≤–µ –±–∞–∑–æ–≤—ã–µ –≤–∏—Ç—Ä–∏–Ω—ã:
> `film_dim` ‚Äî —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Ñ–∏–ª—å–º–æ–≤,
> –∏ `film_rating_agg` ‚Äî –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Ä–µ–π—Ç–∏–Ω–≥–∏.¬ª

### 6.1. –î–µ–Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Ñ–∏–ª—å–º–æ–≤

```sql
SET search_path TO analytics;

SELECT film_id, title, rating
FROM film_dim
ORDER BY title
LIMIT 5;
```

–ï—Å–ª–∏ —Ç–∞–±–ª–∏—Ü–∞ –ø—É—Å—Ç–∞—è ‚Äî –º–æ–∂–Ω–æ –±—ã—Å—Ç—Ä–æ –¥–æ–±–∏—Ç—å (–Ω–æ —ç—Ç–æ –ª—É—á—à–µ —Å–¥–µ–ª–∞—Ç—å –î–û –¥–µ–º–æ).
–ù–∞ —Å–ª—É—á–∞–π –ß–ü —É —Ç–µ–±—è –ø–æ–¥ —Ä—É–∫–æ–π SQL:

```sql
INSERT INTO film_dim (film_id, title, rating, updated_at)
SELECT
    fw.id,
    fw.title,
    fw.rating,
    NOW()
FROM content.film_work fw
ON CONFLICT (film_id) DO UPDATE
SET
    title      = EXCLUDED.title,
    rating     = EXCLUDED.rating,
    updated_at = NOW();
```

–ò –ø–æ—Ç–æ–º:

```sql
SELECT film_id, title, rating
FROM film_dim
ORDER BY title
LIMIT 5;
```

---

### 6.2. –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–π—Ç–∏–Ω–≥–∏

```sql

```

–ì–æ–≤–æ—Ä–∏—à—å:

> ¬´–ó–¥–µ—Å—å –≤–∏–¥–Ω–æ —Å—Ä–µ–¥–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥ –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–æ–ª–æ—Å–æ–≤. –≠—Ç–∏ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏—Ö–æ–¥—è—Ç –∏–∑ `ugc.ratings`.¬ª

---

## 7Ô∏è‚É£ –ü–æ–∫–∞–∑ –∫–æ–Ω—Ñ–∏–≥–æ–≤ ETL –≤ `etl`

–ì–æ–≤–æ—Ä–∏—à—å:

> ¬´–î–∞–ª—å—à–µ ‚Äî –∫–ª—é—á–µ–≤–∞—è —á–∞—Å—Ç—å –¥–∏–ø–ª–æ–º–∞: —è –æ–ø–∏—Å—ã–≤–∞—é ETL-–ø–∞–π–ø–ª–∞–π–Ω—ã –Ω–µ –≤ –∫–æ–¥–µ, –∞ –≤ —Ç–∞–±–ª–∏—Ü–∞—Ö —Å—Ö–µ–º—ã `etl`.
> –ù–∞ –ø–µ—Ä–≤–æ–π –Ω–µ–¥–µ–ª–µ —è –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–ª –¥–≤–∞ –ø–∞–π–ø–ª–∞–π–Ω–∞ –∫–∞–∫ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é.¬ª

–í psql:

```sql
SET search_path TO etl;

SELECT id, name, status
FROM etl_pipelines;
```

–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:

```text
                  id                  |         name         | status
--------------------------------------+----------------------+--------
 11111111-1111-1111-1111-111111111111 | film_dim_full        | IDLE
 22222222-2222-2222-2222-222222222222 | film_rating_agg_full | IDLE
(2 rows)
```

–ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å:

```sql
SELECT id, name, source_query, target_table, mode, batch_size, enabled, status
FROM etl_pipelines;
```

–ò —Ç–æ–≥–¥–∞ –ø—Ä–æ–≥–æ–≤–æ—Ä–∏—Ç—å:

> ¬´–ó–¥–µ—Å—å –æ–ø–∏—Å–∞–Ω—ã:
> ‚Äì –∏–º—è –ø–∞–π–ø–ª–∞–π–Ω–∞,
> ‚Äì SQL-–∏—Å—Ç–æ—á–Ω–∏–∫ (`source_query`),
> ‚Äì —Ç–∞–±–ª–∏—Ü–∞-–ø—Ä–∏—ë–º–Ω–∏–∫ (`target_table`),
> ‚Äì —Ä–µ–∂–∏–º (full/incremental),
> ‚Äì —Ä–∞–∑–º–µ—Ä –±–∞—Ç—á–∞,
> ‚Äì —Å—Ç–∞—Ç—É—Å (IDLE/RUNNING/PAUSED/FAILED).
>
> –î–∞–ª—å—à–µ –≤–æ—Ä–∫–µ—Ä –±—É–¥–µ—Ç —á–∏—Ç–∞—Ç—å —ç—Ç–∏ –∑–∞–ø–∏—Å–∏ –∏ –∏—Å–ø–æ–ª–Ω—è—Ç—å –ø–∞–π–ø–ª–∞–π–Ω—ã –±–µ–∑ –∂—ë—Å—Ç–∫–æ –∑–∞—à–∏—Ç—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤ –∫–æ–¥–µ.¬ª

---

## 8Ô∏è‚É£ –ü–µ—Ä–µ—Ö–æ–¥ –∫ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ (ARCHITECTURE.md)

–í—ã—Ö–æ–¥–∏—Ç—å –∏–∑ psql –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, –Ω–æ –º–æ–∂–Ω–æ:

```sql
\q
```

–í PyCharm –æ—Ç–∫—Ä—ã–≤–∞–µ—à—å `docs/ARCHITECTURE.md`.

–ì–æ–≤–æ—Ä–∏—à—å:

> ¬´–¢–µ–ø–µ—Ä—å –∫–æ—Ä–æ—Ç–∫–æ –ø–æ–∫–∞–∂—É –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É, –∫–æ—Ç–æ—Ä—É—é –±—É–¥—É —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å –Ω–∞ –≤—Ç–æ—Ä–æ–π –Ω–µ–¥–µ–ª–µ –∏ –¥–∞–ª—å—à–µ.¬ª

–ö—Ä–∞—Ç–∫–∏–π –ø–∏—Ç—á:

> ¬´–£ –º–µ–Ω—è —Ç—Ä–∏ –∫–ª—é—á–µ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:
>
> 1. **ETL API (FastAPI)** ‚Äî –ø–æ–∑–≤–æ–ª—è–µ—Ç:
>    ‚Äì —Å–æ–∑–¥–∞—Ç—å –ø–∞–π–ø–ª–∞–π–Ω,
>    ‚Äì –∑–∞–ø—É—Å—Ç–∏—Ç—å / –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å,
>    ‚Äì –æ–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é.
>
> 2. **ETL Runner (Python-–≤–æ—Ä–∫–µ—Ä)** ‚Äî –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –æ–ø—Ä–∞—à–∏–≤–∞–µ—Ç –±–∞–∑—É:
>    ‚Äì –Ω–∞—Ö–æ–¥–∏—Ç –∞–∫—Ç–∏–≤–Ω—ã–µ –ø–∞–π–ø–ª–∞–π–Ω—ã,
>    ‚Äì —á–∏—Ç–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –±–∞—Ç—á–∞–º–∏ –ø–æ SQL,
>    ‚Äì –ø–∏—à–µ—Ç –≤ —Ü–µ–ª–µ–≤—É—é –≤–∏—Ç—Ä–∏–Ω—É,
>    ‚Äì –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤ `etl_state`,
>    ‚Äì –ø–∏—à–µ—Ç –∏—Å—Ç–æ—Ä–∏—é –∑–∞–ø—É—Å–∫–æ–≤ –≤ `etl_runs`.
>
> 3. **ETL metadata (schema: etl)** ‚Äî —ç—Ç–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:
>    ‚Äì `etl_pipelines`,
>    ‚Äì `etl_state`,
>    ‚Äì `etl_runs`.¬ª

–ï—Å–ª–∏ –≤ ARCHITECTURE.md –µ—Å—Ç—å –¥–∏–∞–≥—Ä–∞–º–º–∞ ‚Äî –ø—Ä–æ–ª–∏—Å—Ç—ã–≤–∞–µ—à—å –¥–æ ASCII-—Å—Ö–µ–º—ã –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—à—å –µ—ë.

---

## 9Ô∏è‚É£ –ü–ª–∞–Ω –Ω–∞ —Å–ª–µ–¥—É—é—â—É—é –Ω–µ–¥–µ–ª—é (–≤—Å–ª—É—Ö)

–ö—Ä–∞—Ç–∫–∏–π roadmap:

> ¬´–ù–∞ —Å–ª–µ–¥—É—é—â–µ–π –Ω–µ–¥–µ–ª–µ –ø–ª–∞–Ω —Ç–∞–∫–æ–π:
>
> 1. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å ETL Runner:
>    ‚Äì —á—Ç–µ–Ω–∏–µ `etl_pipelines`,
>    ‚Äì –±–∞—Ç—á–µ–≤–æ–µ —á—Ç–µ–Ω–∏–µ source,
>    ‚Äì UPSERT –≤ `analytics`,
>    ‚Äì –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ `etl_state`.
>
> 2. –°–æ–±—Ä–∞—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π ETL API:
>    ‚Äì `GET /pipelines`,
>    ‚Äì `POST /pipelines/{id}/run`,
>    ‚Äì `POST /pipelines/{id}/pause`,
>    ‚Äì `POST /pipelines/{id}/update-config`.
>
> 3. –î–æ–±–∞–≤–∏—Ç—å –±–∞–∑–æ–≤–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫.
>
> –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ —É –º–µ–Ω—è –±—É–¥–µ—Ç —Ä–∞–±–æ—á–∏–π –ø—Ä–æ—Ç–æ—Ç–∏–ø –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ ETL, —É–ø—Ä–∞–≤–ª—è–µ–º–æ–≥–æ —á–µ—Ä–µ–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤ –±–∞–∑–µ.¬ª

---

## üîü –ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã –∏ –æ—Ç–≤–µ—Ç—ã (—à–ø–∞—Ä–≥–∞–ª–∫–∞)

**‚ùì –ü–æ—á–µ–º—É –Ω–µ Airflow / Luigi?**
‚û°Ô∏è *¬´–¢–µ–º–∞ –¥–∏–ø–ª–æ–º–∞ ‚Äî –∏–º–µ–Ω–Ω–æ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π ETL —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π.
–ì–æ—Ç–æ–≤—ã–µ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä—ã —Ç—É—Ç –±—ã–ª–∏ –±—ã –∏–∑–±—ã—Ç–æ—á–Ω—ã ‚Äî —è –ø–æ–∫–∞–∑—ã–≤–∞—é –∏–º–µ–Ω–Ω–æ —Å–≤–æ—ë —Ä–µ—à–µ–Ω–∏–µ.¬ª*

**‚ùì –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏ –≤–æ—Ä–∫–µ—Ä–∞?**
‚û°Ô∏è *¬´–í `etl_state` —Ö—Ä–∞–Ω–∏—Ç—Å—è `last_processed_id` –∏/–∏–ª–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏.
–ü–æ—Å–ª–µ —Ä–µ—Å—Ç–∞—Ä—Ç–∞ Runner –ø—Ä–æ–¥–æ–ª–∂–∏—Ç —Å –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —á–µ–∫–ø–æ–∏–Ω—Ç–∞.
–ë–∞—Ç—á —Å—á–∏—Ç–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω—ã–º —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –∑–∞–ø–∏—Å–∏ –≤ —Ü–µ–ª–µ–≤—É—é —Ç–∞–±–ª–∏—Ü—É –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è state.¬ª*

**‚ùì –ú–æ–∂–Ω–æ –ª–∏ –¥–æ–±–∞–≤–∏—Ç—å Elasticsearch / ClickHouse –∫–∞–∫ –ø—Ä–∏—ë–º–Ω–∏–∫?**
‚û°Ô∏è *¬´–î–∞. –ü–∏—Å–∞—Ç–µ–ª—å (Writer) –±—É–¥–µ—Ç –≤—ã–¥–µ–ª–µ–Ω –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–ª–æ–π.
–î–ª—è Postgres ‚Äî –æ–¥–∏–Ω –∫–ª–∞—Å—Å, –¥–ª—è ES/ClickHouse ‚Äî –¥—Ä—É–≥–∏–µ, –ø—Ä–∏ —ç—Ç–æ–º Runner –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–∞–π–ø–ª–∞–π–Ω–∞ –Ω–µ –º–µ–Ω—è—é—Ç—Å—è.¬ª*

**‚ùì –ö–∞–∫–∏–µ —É–∑–∫–∏–µ –º–µ—Å—Ç–∞ —Ç—ã –≤–∏–¥–∏—à—å?**
‚û°Ô∏è *¬´–û—Å–Ω–æ–≤–Ω—ã–µ —Ä–∏—Å–∫–∏:
‚Äì –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å state –∏ –ø–æ–≤—Ç–æ—Ä–∞–º–∏ (–∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å),
‚Äì –∞–∫–∫—É—Ä–∞—Ç–Ω–∞—è –ø–∞—É–∑–∞ –ø–∞–π–ø–ª–∞–π–Ω–∞ –Ω–∞ —Å–µ—Ä–µ–¥–∏–Ω–µ –±–∞—Ç—á–∞,
‚Äì –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫, —á—Ç–æ–±—ã –ø–∞–π–ø–ª–∞–π–Ω –Ω–µ –∑–∞–≤–∏—Å–∞–ª –≤ –Ω–µ–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏.¬ª*

---

## 1Ô∏è‚É£1Ô∏è‚É£ –§–∏–Ω–∞–ª—å–Ω–∞—è —Ñ—Ä–∞–∑–∞

–ö–æ—Ä–æ—Ç–∫–æ –∏ —É–≤–µ—Ä–µ–Ω–Ω–æ:

> ¬´–≠—Ç–æ –≤—Å—ë –ø–æ —Ç–µ–∫—É—â–µ–º—É –ø—Ä–æ–≥—Ä–µ—Å—Å—É.
>
> –ù–∞ –ø–µ—Ä–≤–æ–π –Ω–µ–¥–µ–ª–µ —è:
> ‚Äì –ø–æ–¥–≥–æ—Ç–æ–≤–∏–ª —Å—Ç–µ–Ω–¥ —Å —á–µ—Ç—ã—Ä—å–º—è —Å—Ö–µ–º–∞–º–∏ (`content`, `ugc`, `analytics`, `etl`),
> ‚Äì –∑–∞–≥—Ä—É–∑–∏–ª —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ,
> ‚Äì —Å–æ–±—Ä–∞–ª –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –≤–∏—Ç—Ä–∏–Ω—ã,
> ‚Äì –æ–ø–∏—Å–∞–ª –¥–≤–∞ ETL-–ø–∞–π–ø–ª–∞–π–Ω–∞ –∫–∞–∫ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.
>
> –î–∞–ª—å—à–µ –±—É–¥—É —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å Runner –∏ API –ø–æ–≤–µ—Ä—Ö —ç—Ç–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã.¬ª

---
