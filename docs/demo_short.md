
---

# üß® **–®–ê–†–ì–ê–õ–ö–ê –î–õ–Ø –î–ï–ú–û (1 —Å—Ç—Ä–∞–Ω–∏—Ü–∞)**

---

## **0. –ü–µ—Ä–µ–¥ –¥–µ–º–æ ‚Äî –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û**

–≠—Ç–æ —Ç–µ–±—è —Å–ø–∞—Å—ë—Ç –æ—Ç –ª—é–±—ã—Ö –ø–æ–∑–æ—Ä–æ–≤.

### ‚úî –°–∫–∞–∂–∏:

> ¬´–ü–µ—Ä–µ–¥ –¥–µ–º–æ —è –≤—ã–ø–æ–ª–Ω—è—é init_demo_data ‚Äî –æ–Ω —Å–æ–∑–¥–∞—ë—Ç —Å—Ö–µ–º—ã, —Ç–∞–±–ª–∏—Ü—ã, –≤–∏—Ç—Ä–∏–Ω—ã –∏ –ø–∞–π–ø–ª–∞–π–Ω—ã.¬ª

### ‚úî –ö–æ–º–∞–Ω–¥–∞:


```bash
docker exec -i diploma_postgres psql -U cinema -d cinema < sql/init_demo_data.sql
```

**–≠—Ç–æ—Ç —à–∞–≥ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω.**

---

# ‚úÖ **1. –ü–æ–∫–∞–∑–∞—Ç—å, —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç**

### ‚úî –°–∫–∞–∂–∏:

> ¬´–°—Ç–µ–Ω–¥ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π, —Ç–æ–ª—å–∫–æ Postgres.¬ª

### ‚úî –ö–æ–º–∞–Ω–¥–∞:

```bash
docker ps
```

–î–æ–ª–∂–µ–Ω –±—ã—Ç—å `diploma_postgres`.

---

# ‚úÖ **2. –ó–∞–π—Ç–∏ –≤ –±–∞–∑—É**

### ‚úî –ö–æ–º–∞–Ω–¥–∞:

```bash
docker exec -it diploma_postgres psql -U cinema -d cinema
```

---

# ‚úÖ **3. –ü–æ–∫–∞–∑–∞—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫–∏: –∫–æ–Ω—Ç–µ–Ω—Ç –∏ UGC**

### ‚úî –°–∫–∞–∂–∏:

> ¬´–í–æ—Ç –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –æ–Ω–ª–∞–π–Ω-–∫–∏–Ω–æ—Ç–µ–∞—Ç—Ä —Ö—Ä–∞–Ω–∏—Ç –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Å—Ö–µ–º–∞—Ö: —Ñ–∏–ª—å–º—ã –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –æ—Ü–µ–Ω–∫–∏.¬ª

### ‚úî –ö–æ–º–∞–Ω–¥—ã:

```sql
SET search_path TO content;
SELECT id, title, rating FROM film_work LIMIT 3;

SET search_path TO ugc;
SELECT film_id, rating FROM ratings LIMIT 3;
```

---

# ‚úÖ **4. –ü–æ–∫–∞–∑–∞—Ç—å –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –≤–∏—Ç—Ä–∏–Ω—ã**

### ‚úî –°–∫–∞–∂–∏:

> ¬´–ê –≤–æ—Ç –ø—Ä–µ–¥—Å–æ–±—Ä–∞–Ω–Ω—ã–µ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –≤–∏—Ç—Ä–∏–Ω—ã, –∫–æ—Ç–æ—Ä—ã–µ –≤ –±—É–¥—É—â–µ–º –±—É–¥–µ—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å ETL-–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞.¬ª

### ‚úî –ö–æ–º–∞–Ω–¥—ã:

```sql
SET search_path TO analytics;
SELECT * FROM film_dim LIMIT 3;

SELECT * FROM film_rating_agg LIMIT 3;
```

–ï—Å–ª–∏ init_demo_data –±—ã–ª –≤—ã–ø–æ–ª–Ω–µ–Ω ‚Üí –¥–∞–Ω–Ω—ã–µ –µ—Å—Ç—å.

---

# ‚úÖ **5. –ü–æ–∫–∞–∑–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é ETL-–ø–∞–π–ø–ª–∞–π–Ω–æ–≤**

### ‚úî –°–∫–∞–∂–∏:

> ¬´–ì–ª–∞–≤–Ω–æ–µ –æ—Ç–ª–∏—á–∏–µ –º–æ–µ–≥–æ ETL ‚Äî –æ–Ω —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π, –∞ –Ω–µ –∫–æ–¥–æ–º.
> –ö–∞–∂–¥—ã–π –ø–∞–π–ø–ª–∞–π–Ω –æ–ø–∏—Å–∞–Ω –≤ —Ç–∞–±–ª–∏—Ü–µ etl_pipelines.¬ª
> 
> –∫–∞–∫ –±—É–¥–µ—Ç –º–µ–Ω—è—Ç—å—Å—è –ø–∞–π–ø–ª–∞–π–Ω

### ‚úî –ö–æ–º–∞–Ω–¥–∞:

```sql
SET search_path TO etl;
SELECT id, name, status FROM etl_pipelines;
```

–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:

```
film_dim_full        | IDLE
film_rating_agg_full | IDLE
```

---

# ‚úÖ **6. –ü–æ–∫–∞–∑–∞—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É (–∫–æ—Ä–æ—Ç–∫–æ)**

### ‚úî –°–∫–∞–∂–∏ (20 —Å–µ–∫—É–Ω–¥):

> ¬´–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —Ç—Ä—ë—Ö —á–∞—Å—Ç–µ–π:
> ‚Äì ETL API (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥–∞–º–∏),
> ‚Äì ETL Runner (–∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞—Ç—á–∞–º–∏),
> ‚Äì ETL Metadata (—Å—Ö–µ–º–∞ etl).
>
> Runner —á–∏—Ç–∞–µ—Ç –ø–∞–π–ø–ª–∞–π–Ω—ã –∏–∑ —Ç–∞–±–ª–∏—Ü—ã, –≤—ã–ø–æ–ª–Ω—è–µ—Ç –±–∞—Ç—á–∏, –æ–±–Ω–æ–≤–ª—è–µ—Ç state.
> –ì–ª–∞–≤–Ω–∞—è –∏–¥–µ—è ‚Äî –º–µ–Ω—è—Ç—å ETL –º–æ–∂–Ω–æ, –Ω–µ –º–µ–Ω—è—è –∫–æ–¥.¬ª

–û—Ç–∫—Ä—ã–≤–∞–µ—à—å `ARCHITECTURE.md`.

---

# üé§ **7. –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ**

### ‚úî –°–∫–∞–∂–∏:

> ¬´–°—Ç–µ–Ω–¥ –ø–æ–¥–Ω—è—Ç, –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã, –≤–∏—Ç—Ä–∏–Ω—ã –µ—Å—Ç—å, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è ETL —Ä–∞–±–æ—Ç–∞–µ—Ç.
> –ù–∞ —Å–ª–µ–¥—É—é—â–µ–π –Ω–µ–¥–µ–ª–µ —è —Ä–µ–∞–ª–∏–∑—É—é Runner –∏ API: –∑–∞–ø—É—Å–∫/–ø–∞—É–∑–∞, –±–∞—Ç—á–∏, UPSERT, state.¬ª

---

# üõü **–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ–π–¥—ë—Ç –Ω–µ —Ç–∞–∫**

| –ü—Ä–æ–±–ª–µ–º–∞                  | –ß—Ç–æ —Å–∫–∞–∑–∞—Ç—å                                          |
| ------------------------- | ---------------------------------------------------- |
| –í–∏—Ç—Ä–∏–Ω –Ω–µ—Ç                | ¬´–ó–Ω–∞—á–∏—Ç, –Ω–µ –≤—ã–ø–æ–ª–Ω–∏–ª init_demo_data, —Å–µ–π—á–∞—Å –≤–∫–ª—é—á—É.¬ª |
| –¢–∞–±–ª–∏—Ü –Ω–µ—Ç                | ¬´–ò—Å–ø—Ä–∞–≤–ª—è—é search_path.¬ª                             |
| –î–∞–Ω–Ω—ã–µ –ø—É—Å—Ç—ã–µ             | ¬´–î–ª—è –¥–µ–º–æ –∏—Å–ø–æ–ª—å–∑—É—é –Ω–µ–±–æ–ª—å—à–æ–π —Ç–µ—Å—Ç–æ–≤—ã–π –¥–∞—Ç–∞—Å–µ—Ç.¬ª     |
| –ü–∞–π–ø–ª–∞–π–Ω—ã –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è | ¬´–ó–Ω–∞—á–∏—Ç, –Ω–µ –ø—Ä–∏–º–µ–Ω–∏–ª init_demo_data, —Ñ–∏–∫—Å–∏—Ä—É—é.¬ª      |

---


```sql

—Ñ–∏–ª—å–º—ã –∏ –æ—Ü–µ–Ω–∫–∏

SET search_path TO content;
SELECT id, title, rating FROM film_work LIMIT 3;

SET search_path TO ugc;
SELECT film_id, rating FROM ratings LIMIT 3;

-----

–∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ç–∞–±–ª–∏—Ü—ã


SET search_path TO analytics;
SELECT * FROM film_dim LIMIT 3;

SELECT * FROM film_rating_agg LIMIT 3;

-----

–ø–∞–π–ø–ª–∞–π–Ω—ã

SET search_path TO etl;
SELECT id, name, status FROM etl_pipelines;


—è –¥–æ–±–∞–≤–ª—é —Å—é–¥–∞ –ø–æ–ª—è –≤—Ä–æ–¥–µ source_query, target_table, mode, batch_size, incremental_key

–≤ –±—É–¥—É—é—â–µ–º

–¢—Ä–∏ –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:

ETL API ‚Äî FastAPI-—Å–µ—Ä–≤–∏—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞–π–ø–ª–∞–π–Ω–∞–º–∏: –≤–∫–ª—é—á–∏—Ç—å, –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å, –æ–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥.

ETL Runner ‚Äî –≤–æ—Ä–∫–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é —á–∏—Ç–∞–µ—Ç etl_pipelines, –∫—Ä—É—Ç–∏—Ç –±–∞—Ç—á–∏, –ø–∏—à–µ—Ç –≤ analytics –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤ etl_state.

ETL Metadata (schema etl) ‚Äî —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π, —á–µ–∫–ø–æ–∏–Ω—Ç–æ–≤ –∏ –∏—Å—Ç–æ—Ä–∏–∏ –∑–∞–ø—É—Å–∫–æ–≤.